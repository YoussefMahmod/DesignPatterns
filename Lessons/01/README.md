<div dir = rtl>

<div align = "center">

# بسم الله الرحمن الرحيم
## السلام عليكم ورحمة الله وبركاته
## --{ Design Patterns #1 }--

</div>

في هذا الدرس سيتم شرح ما هو الـ `Design Pattern` والـ `UML` وسيتم التفرغ لتطبيقات عملية عن الـ `pattern` في الدرس االقادم  


# `ما هو الـ Design Patterns`

هي تعني `انماط او نماذج التصميم` وهي مجموعة من الحلول للمشاكل الشائعة المتكررة في عالم البرمجة  
بمعنى انه هناك افكار ومشاريع بها بعض المشاكل الشائعة التى تتكرر دائما  
فتم عمل مجموعة من الحلول وهي الـ `Design Patterns` لحل تلك المشاكل المتكررة

يوجد العديد والعديد من الـ `Design Patterns` المختلفة وكل واحدة مخصصة لحل مشكلة او بعض المشاكل المعينة  

احيانا في المشاريع الضخمة التى تمتلك مجموعة كبيرة من `الفئات` (`Classes`) المترابطة مع بعضها البعض  بشكل متشابك  
ويكون من صعب ان تتبع البرنامج واحيانا يصعب التعديل عليه  

لذالك ظهرت الـ `Design Patterns` ايضا لتنظم سير المشروع  وتحل مشاكله وترتب مكوناته وتجعل البرنامج اكثر تنظيما ويسهل التعديل عليه بسلاسة  

### `انواع الـ Design Patterns`  

يوجد لدينا العديم من  ثلاث انواع اساسية وهم  

- `Creational` (الإنشائية)  
  وهو يهتم بطريقة وكيفية انشاءنا `للكائنات` (`Objects`)
- `Behavioral` (السلوكية)  
  وهو يهتم بطريقة تفاعل وتواصل `الكائنات` مع بعضها البعض
- `Structural` (الهيكلية)  
  وهو يهتم بكيفية بناء وتعاون بين `الكائنات` و`الفئات` (`Classes`) المختلفة


قبل ان نبدأ بالتعرف على تلك الـ `Design Patterns` علينا ان نفهم ونتعلم الـ `UML Class Diagram` اولًا 


# `UML Class Diagram`

الـ `UML` اختصار لـ `Unified Modelling Language` ومعناها انها لغة نمذجة موحدة لرسم `الفئات`  
بمعنى انها لغة توصيفية للنماذج `الفئات` بشكل خاص في الـ `OOP`   
اي اننا نستخدمنها لوصف `الفئات` التى لدينا في المشروع وما المتغيرات التى يحتويه وما الدوال التى به وسواء كانت عامة او خاصة `private` ام `public` والعلاقات ما بين `الفئات` ببعضها البعض  

هي اشبه بجداول لوصف كل `فئة` وعلاقتها `بالفئات` الاخرى  

دعونا نرى مثال على شكل جدول الـ `UML`  

<div dir = ltr align = "center">

|ClassName|
|:-:|
|Variables|
|Methods|

</div>

الجدول يكون شكله الاساسي هكذا  
- الصف الاول يكون `اسم الفئة` (`class Name`) 
- الصف الثاني يكون `المتغيرات` الخاصة بهذه `الفئة`  
- الصف الثالث يكون `الدوال` الخاصة بهذه `الفئة`  

## `المتغيرات`

المتغيرات تعريفها يكون هكذا  

<div dir = ltr>

```
Name : Datatype
```
</div>

نكتب `الاسم` ثم `:` ثم `نوع البيانات` 

لكن هذا المتغير لكي نعرفه على انه `public` او `private` نكتب قبله اشارة `-` للـ `private` و `+` للـ `public`  

<div dir = ltr>

```dart
- id : int
+ name : string
```
</div>

في المثال المقابل لدينا متغيرين الاول اسمه `id` من النوع `int` وهو `private`  
والثاني اسمه `name` من النوع `string` وهو `public`  

يوجد رمزين اخران غير `+` و `-` وهما الـ `#` وهو للـ `protected` و `~` وهو للـ `package`  

ان اردنا ان نقول ونحدد ان متغير ما يكون نوعه `static`   
فنحن نضع تحته خط هكذا <u> `counter : int` </u>

- ملحوظة : الـ `static` يجعل المتغير او الدالة يتم استدعائها عن طريق `اسم الفئة` وليس عن طريق إنشاء كائن (`object`) من هذه `الفئة`  
  فعلى سبيل المثال ان كان لدينا `فئة` تدعى `Car` وتحتوي على متغير اسمه `counter` نوعه `int` ثم جعلناه `static`   
  فنستطيع استدعاء هذا المتغير هكذا `Car::counter` دون انشاء اي كائن من `فئة` `Car` 

  - في الـ <span dir = ltr> `C++` </span> نستخدم `Car::counter`  
  - في الـ `JAVA` نستخدم `Car.counter`

وان اردنا ان نضع شرطًا معينا لهذه المتغيرات، فمثلا ان نقول ان الـ `id` يجب ان يكون `unique` اي لا يمكن تكراره، او ان نقول ان الاسماء يجب ان تكون مرتبة  

 نفعل ذلك بفتح `{ }` ونكتب في داخلها الشرط  

<div dir = ltr>

```dart
- id : int {unique}
+ name : string {ordered}
+ salary : flaot {salary >= 3000}
```
</div>

فهنا نقول ان الـ `id` يجب الا يتكرر  
وان الـ `name` يكون ان يكون مترتب  
وان الـ `salary` يجب ان يكون اعلى من `3000` او يساويه  


## `الدوال`

نفس الامر مع الدوال نكتبها بنفس الطريقة

<div dir = ltr>

```
VariableName(Datatype): Datatype
```
</div>

هذا هو الشكل الكامل للدوال لكن قد لا تكتبها بشكلها الكامل دائما بل على حسب نوعية الدالة   

لناخد امثلة لنرى كيف  

<div dir = ltr>

```dart
- setName(string)
- getName() : string
```
</div>

الدالة الاولى تستقبل `string` والثانية ترجع `string` وكلايهما `private`  
الاولى لا ترجع شيء بالتستقبل فقط،  يمكننا ان نقول انها ترجع `void` بهذا الشكل `setName(string) : void`  
لكن يمكننا عدم كتابة `void`، فلا يوجد فارق في كتابتها ام لا

ناخذ مثال حقيقي على الـ `UML` 

<div dir = ltr align = "center">

|Animal|
|:-:|
|- id : int <br> - name : string|
|+ setName(string) <br> + getName() : string|

</div>

هنا لدينا `فئة` واحدة تسمى `Animal` وتحتوي على متغيرين `id` و`name`  
الاول من النوع `int` والثاني من نوع `string` وكلايهما `private`  
ويحتوي على دالتين الاولى `setName` تستقبل `string` والثانية `getName` ترجع `string` وكلايهما `public`  

الان سنوضح كيف نمثل العلاقات بين `الفئات` مع بعضها البعض  

## `Abstract Class and Interface`

`فئة` الـ `Animal` الذي انشأناها فوق كانت هى `الفئة` الاساسية التى ستورث منه باقي `الفئات` الاخرى  
ولا يجب ان يكون له `object` لذا سنجعل `فئة` الـ `Animal` يكون `Abstract Class` بجعل اسم `الفئة` مائلًا قليلا  
كأنك تجعله `italic` في الكتابة كهذا <i> `Animal` </i>  
او عن طريق كتابة `<<Abstract>>` فوق اسمه  

بهذا الشكل  

<div dir = ltr align = "center">

|<i> Animal </i>|
|:-:|
|- id : int <br> - name : string|
|+ setName(string) <br> + getName() : string|

او هكذا  

|<< Abstract >> <br> Animal|
|:-:|
|- id : int <br> - name : string|
|+ setName(string) <br> + getName() : string|

</div>

هكذا `فئة` الـ `Animal` اصبح `Abstract Class` اي انها `فئة` رئيسية تحتوي على خواص الحيونات بشكل عام  
ولا يمكن انشاء منه `كائن` (`object`)  
لان الـ `Abstract Class` هى `فئة` تعمل كقاعدة بيانات تخزن فقط خواص وبيانات عن `"ماذا يكون الحيوان بشكل عام او بما يتكون"`  
فمنطقي انه لا يمكن انشاء منه اي `كائن` لانه ليس به وظائف او اي دالة تفاعلية هو فقط `فئة توصيفية`  
يخزن فيه البيانات العامة ويتم توريثها `للفئات` الاخرى لتستخدم الدوال الخاصة بها او تعديل الدالة في حين كانت `Abstract Function`  

- ملحوظة: الـ `Abstract Function` دالة يمكن تعديلها عندما يتم وراثتها

اما في حين اردنا جعل `الفئة` تكون `interface` 
نكتب  `<<Interface>>` فوق اسمه  


<div dir = ltr align = "center">

|<< Interface >> <br> Animal|
|:-:|
|- id : int <br> - name : string|
|+ setName(string) <br> + getName() : string|

</div>

### `ما الفرق بين الـ Interface والـ Abstract ؟`

- الـ `interface` مفهوم يتبع اسلوب الـ `implement` (`التنفيذ`) وليس الوراثة العادية  
  بمعنى انه ان قررت `فئة` ما ان تنفذ `interface` اي بجعل العلاقة بينها وبين الـ `interface` تكون `implement`  
  فهكذا هذه `الفئة` ستكون ملزمة بان تعدل وتستخدم الدوال التى اخدتها من الـ `interface` لانه لم يورثها بالجعلها `implement`  

  - لان الـ `implement` هو `التنفيذ` الاجباري للشيء، فان كنت ستنفذ واجهه (`interface`) ان مجبر على `تنفيذ` كل ما في هذه `الواجهه`

- `فئة` الـ `Abstract` يكون `على الاقل دالة واحدة` فقط تكون `Abstract Function`  
  اي اذا ورثت `فئة` ما `فئة` الـ `Abstract` فإنها ترث كل الدوال بشكل طبيعي  
  بالاضافة انه يجب عليها ان تعدل وتستخدم الـ `Abstract Function` التى ورثتها من الـ `Abstract class`  


## `Relationships Arrows`

الان كيف نمثل العلاقات بين `الفئات` المختلفة  
هنا نستخدم الاسهم لوصف كل علاقة وكل سهم يرمز الى علاقة مختلفة  

لن اشرح كل العلاقات لانها كثيرة ومتنوعة جدا لذا سأشرح بعضها والاهم منها  


### - `Inheritance/Generalization Arrow`  
  
واول سهم لدينا هنا هو سهم الوراثة `Inheritance Arrow` ويطلق عليه ايضًا بـ `Generalization Arrow`

![](Image/0.png)

ففرضًا اننا لدينا `فئة` جديدة خاصة للحيونات البرية ولتكن اسم هذه `الفئة`  `WildAnimal`  

هكذا

<div dir = ltr align = "center">

|WildAnimal|
|:-:|
|- dangerRate : int|
|+ setDangerRate(int) <br> + getDangerRate() : int|

</div>

وضفنا فيها متغير جديد يقيس معدل خطورة هذا الحيوان البري ودوال لتفاعل مع المتغير  

هذه `الفئة` نريدها ان ترث `فئة` الـ `Animal`  
كيف نمثل هذه العلاقة بجداول ؟  

![](Image/1.png)

هكذا نخبرها ان `فئة` `WildAnimal` ترث `فئة` `Animal`

### - `Dependency` 

العلاقة التانية هي الـ `Dependency` وهي الاعتمادية  
بمعنى ان قلنا ان `فئة أ` تعتمد على `فئة ب` فهذا يعني ان `فئة أ لن تتواجد الى بوجود `فئة` ب`

وهذا شكل السهم الذي يرمز له  

![](Image/2.png)

والاعتمادية تظهر بوضوح تام مع الـ `interface` لان لو `فئة أ` لديها علاقة `implement` مع `interface`  
فهكذا `فئة أ` ستستخدم جميع دوال الـ `interface` بشكل اجباري  

![](Image/3.png)

هكذا `الفئة` `WildAnimal` ستأخذ وتستخدم جميع الدوال بشكل اجباري من الـ `interface` الـ `Animal`  
فهكذا `فئة` `WildAnimal` ستأخد الدالتين `setName` و`getName` عندها بشكل اجباري لتستخدمهم وتعدل عليهم  

فإذا اختفى الـ `Animal` اصبح الـ `WildAnimal` ليس له وجود  
لانه وجوده والدوال التى به تعتمد على تواجد الـ `Animal`  


### - `Association` 

هو اشبه بعلاقة توصيفية اوتعريفية لنوع العلاقة بين `الفئات`  

سهمه له شكلان  
![](Image/4.png)

- `السهم الاول يصف علاقة باتجاه واحد فقط` 
   
فلو لدينا `فئة` اسمها `Teacher` وفئة تدعى `Student`  
فإذا  قلنا ان المدرس يدرس للتلاميذ وليس العكس فهذه العلاقة باتجاه واحد  

![](Image/5.png)

لا يوجد علاقة وراثية حقيقية بينهما لكن يوجد علاقة تصف ان المدرس يقوم بتدريس التلاميذ  

يمكننا ان نقول في المثال خاصتنا ان الحيونات البرية تأكل اللحوم  

- `السهم الاخر يصف علاقة ذو اتجهان`
  
![](Image/6.png)

يمكننا ان نقول ان التلاميذ لديهم مدرس وان المدرس لديه تلاميذ  

يمكننا ان نعبر بعلاقة رقمية فمثلا يمكننا ان نقول ان العلاقة بين المعلم والتلميذ `many to many`  
اي ان التلاميذ لديهم اكثر من استاذ  والاستاذ لديه اكثر من تلميذ  

كهذا
![](Image/7.png)

العلاقات الرقمية  
- <span dir = ltr> `1..*` </span> واحد او اكثر، على الاقل سيوجد واحد
- <span dir = ltr> `0..*` </span> صفر او اكثر، هناك احتمالية الا يوجد شيء
- <span dir = ltr> `0..1` </span> واحد او اكثر، قد يوجد واحد فقط او قد لا يوجد شيء
- `n` تستطيع ان تحدد عدد ثابت ومحدد مثل `1`، `2`، `3`، ...
- `n..m` يمكننا ان نحدد مجال للعلاقة، فمثلا البيت يجب ان يحتوي على `3` غرف بحد ادنى او `5` غرف بحد 
اقصى`2..5`

### - `Aggregation` 

السهم خاصته يبدو هكذا  
![](Image/8.png)

وهو يصف علاقة تكون على النحو التالي 
`الفئة أ` قد تكون جزء من `الفئة ب`  
لكن هذا ليس اجباريا على `الفئة أ` فإن اختفت `ب` فستظل `أ` كما هي لم تتغير فيها شيء  

على سبيل المثال `الشخص` قد يكون جزء من `المجتمع` او من `الاسرة`  
لكن ان اختفى `المجتمع` فيظل هذا `الشخص` كما هو لم يتأثر فيه شيء

في المثال خاصتنا يمكننا ان نقول ان `الأسد` وهو من الحيونات البرية قد يكون جزء من `القطيع`  
لكن ليس شرطا الزاميا ان يكون جزء منها، فان اختفى `القطيع` سيظهل كما هو متواجد  

![](Image/9.png)

هذا المثال يحتوي على `فئة` تدعى `Person` واخرى تدعى `Student`  
والعلاقة هنا هي `Aggregation` من الـ `Person` للـ `Student`  
وهو يصف انه يمكن `للشخص` ان `يكون جزء` من `الطلاب` لكن هذا `ليس شرطا على كل الاشخاص`  




### - `Composition`  

السهم خاصته يبدو هكذا  

![](Image/10.png)

وهو يصف علاقة تكون على النحو التالي 
`الفئة أ` تكون من مكونات بناء `الفئة ب`  
وهذا اجباري على `الفئة أ` فإن اختفت `ب` فستختفي `أ`  
لان `الفئة أ` من مكونات `الفئة ب` اي انها جزء لا يتجزء منها  

فعلى سبيل المثال `البيت` يتكون من مجموعة من `الغرف` غرفة النوم والمطبخ والحمام  
فهذه `الغرف هي مكونات البيت` ان انهار البيت فكل شيء سينهار  

![](Image/11.png)

وهنا لدينا مثال اخر لتمثيل العلاقة في الجداول وهي بين `المجلد` و`الملفات`  
`المجلت` يتكون من مجموعة من `الملفات`  
ان تم حذف `المجلد` تم حذف `الملفات` معه  


هنا ينتهي الدرس  
شرحت نبذة عن اهم الاشياء في الـ `UML Class Diagram `  
وفي الدرس القادم سندخل في الـ `Design Pattern` 

# `مصادر مفيدة`

<div dir = ltr>

https://www.uml-diagrams.org/class-diagrams-overview.html  

https://www.visual-paradigm.com/guide/uml-unified-modeling-language/uml-class-diagram-tutorial/

https://www.gofpatterns.com/design-patterns/module1/intro-design-patterns.php

</div>

</div> 